<script type="importmap">
  {
    "imports": {
      "@google/genai": "https://esm.sh/@google/genai@^0.7.0"
    }
  }
</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />

<div class="app-container">
  <main class="main-content">
    <header class="dashboard-header">
      <div class="header-left">
        <h1>Study Deck <span>Generator</span></h1>
        <p class="subtitle">AI-powered knowledge conversion</p>
      </div>
      <div class="header-actions">
        <div class="selector-group">
          <label class="selector-label">Model</label>
          <div class="pill-selector" id="modelSelector">
            <button type="button" class="pill-btn active" data-model="gemini-3-flash-preview">Flash</button>
            <button type="button" class="pill-btn" data-model="gemini-3-pro-preview">Pro</button>
          </div>
        </div>
        <div class="selector-group">
          <label class="selector-label">Difficulty</label>
          <div class="pill-selector" id="difficultySelector">
            <button type="button" class="pill-btn" data-level="easy">Easy</button>
            <button type="button" class="pill-btn active" data-level="medium">Medium</button>
            <button type="button" class="pill-btn" data-level="hard">Hard</button>
          </div>
        </div>
        <div class="selector-group">
          <label class="selector-label">Quantity</label>
          <select id="quantitySelector" class="custom-dropdown">
            <option value="10">10 Cards</option>
            <option value="25">25 Cards</option>
            <option value="50">50 Cards</option>
          </select>
        </div>
      </div>
    </header>

    <div class="input-dashboard">
      <div class="input-card">
        <div class="card-header">
          <span class="label">Knowledge Input</span>
          <div id="activeModelBadge" class="badge neon-blue">Gemini 3 Flash</div>
        </div>
        <div class="search-input-wrapper">
          <span class="material-symbols-rounded search-icon">search</span>
          <input
            type="text"
            id="topicInput"
            placeholder="Enter a subject to master (e.g. Quantum Physics, Roman History)..."
          />
        </div>
        <div class="card-footer">
          <button id="generateButton">
            <span class="material-symbols-rounded">magic_button</span>
            Generate
          </button>
        </div>
      </div>
      
      <div class="stats-card">
        <div class="card-header">
          <span class="label">Session Status</span>
        </div>
        <div id="errorMessage" class="status-text">Ready.</div>
        <div id="progressContainer" class="progress-ring-container">
          <svg class="progress-ring" width="80" height="80">
            <circle class="progress-ring-bg" stroke="rgba(255,255,255,0.05)" stroke-width="5" fill="transparent" r="32" cx="40" cy="40"/>
            <circle id="loadingCircle" class="progress-ring-fill" stroke="var(--accent-purple)" stroke-width="5" stroke-linecap="round" fill="transparent" r="32" cx="40" cy="40"/>
          </svg>
          <div id="ringLabel" class="ring-label">AI</div>
        </div>
      </div>
    </div>

    <section id="overviewSection" class="overview-section hidden">
      <div class="overview-header-clickable" id="overviewToggle">
        <div class="overview-title-group">
          <span class="label">Knowledge Overview</span>
          <h3 id="overviewTitle">Topic Summary</h3>
        </div>
        <span class="material-symbols-rounded toggle-arrow">expand_less</span>
      </div>
      <div class="overview-collapsible-content" id="overviewContent">
        <p id="overviewText">Overview content goes here...</p>
        <div id="overviewSources" class="overview-sources">
          <!-- Sources list -->
        </div>
      </div>
    </section>

    <section class="results-section">
      <div class="results-header">
        <h2>Flashcards</h2>
        <div class="filters">
          <span class="dot purple"></span> <span id="cardCountLabel">0</span> Cards Generated
        </div>
      </div>
      <div id="flashcardsContainer" class="flashcards-grid">
        <!-- Generated cards appear here -->
      </div>
    </section>
  </main>
</div>