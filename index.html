<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mastery Deck AI</title>
  <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@^0.7.0"
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <link rel="stylesheet" href="index.css">
</head>
<body class="dark-mode">
  <div class="app-container">
    <main class="main-content">
      <header class="dashboard-header">
        <div class="header-left">
          <h1>Mastery Deck <span>AI</span></h1>
          <p class="subtitle">Convert any subject into a mastery session</p>
        </div>
        <div class="header-actions">
          <div class="selector-group">
            <span class="selector-label">Intelligence</span>
            <div class="pill-selector illuminated-group" id="modelSelector">
              <button type="button" class="pill-btn active neon-flash" data-model="gemini-3-flash-preview">Flash</button>
              <button type="button" class="pill-btn neon-pro" data-model="gemini-3-pro-preview">Pro</button>
            </div>
          </div>
          <div class="selector-group">
            <span class="selector-label">Depth</span>
            <div class="pill-selector illuminated-group" id="difficultySelector">
              <button type="button" class="pill-btn neon-easy" data-level="easy">Easy</button>
              <button type="button" class="pill-btn active neon-medium" data-level="medium">Medium</button>
              <button type="button" class="pill-btn neon-hard" data-level="hard">Hard</button>
            </div>
          </div>
          <div class="selector-group">
            <span class="selector-label">Quantity</span>
            <select id="quantitySelector" class="custom-dropdown neon-qty">
              <option value="10">10 Cards</option>
              <option value="25">25 Cards</option>
              <option value="50">50 Cards</option>
            </select>
          </div>
          <div class="selector-group theme-group">
            <span class="selector-label">Theme</span>
            <button id="themeToggle" class="theme-btn" title="Toggle Appearance">
              <span class="material-symbols-rounded">dark_mode</span>
            </button>
          </div>
        </div>
      </header>

      <div class="input-dashboard">
        <div class="input-card">
          <div class="card-header">
            <span class="card-label">Subject Entry</span>
          </div>
          <div class="search-input-wrapper">
            <span class="material-symbols-rounded search-icon">psychology</span>
            <input type="text" id="topicInput" placeholder="Enter a subject to master (e.g. Quantum Physics, Roman History)..." />
          </div>
          <div class="input-actions">
            <button id="generateButton">
              <span class="material-symbols-rounded">rocket_launch</span>
              Generate Deck
            </button>
          </div>
        </div>
        
        <div class="stats-card">
          <span class="card-label session-label">Session Progress</span>
          <div id="progressContainer" class="progress-ring-container">
            <svg class="progress-ring" width="80" height="80">
              <circle class="progress-ring-bg" stroke="var(--ring-bg)" stroke-width="5" fill="transparent" r="32" cx="40" cy="40"/>
              <circle id="loadingCircle" class="progress-ring-fill" stroke="var(--accent-purple)" stroke-width="5" stroke-linecap="round" fill="transparent" r="32" cx="40" cy="40"/>
            </svg>
            <div id="ringLabel" class="ring-label">AI</div>
          </div>
          <div id="errorMessage" class="status-text">Ready to learn</div>
          <button id="regenerateCardsButton" class="pill-btn neon-flash active hidden stats-action-btn" title="Generate fresh info cards for this subject">
            <span class="material-symbols-rounded" style="font-size: 16px;">cached</span>
            Regenerate
          </button>
        </div>
      </div>

      <section id="overviewSection" class="overview-section is-collapsed">
        <div class="overview-header-clickable" id="overviewToggle">
          <div class="results-title-group" style="padding: 24px;">
            <h2>SUBJECT OVERVIEW</h2>
            <div class="filters">
              <span class="dot blue"></span> <span id="overviewTitle">Topic Summary</span>
            </div>
          </div>
          <div class="toggle-btn-wrapper">
            <span class="material-symbols-rounded toggle-arrow">expand_less</span>
          </div>
        </div>
        <div class="overview-collapsible-content" id="overviewContent">
          <div id="overviewText">Ready for a subject entry...</div>
          <div class="overview-actions">
            <button id="moreInfoButton" class="pill-btn neon-flash active">
              <span class="material-symbols-rounded" style="font-size: 16px;">add_circle</span>
              More...
            </button>
          </div>
          <div id="overviewSources" class="overview-sources"></div>
        </div>
      </section>

      <section id="resultsSection" class="results-section is-collapsed">
        <div class="results-header-clickable" id="resultsToggle">
          <div class="results-title-group" style="padding: 24px;">
            <h2>FLASH CARDS</h2>
            <div class="filters">
              <span class="dot purple"></span> <span id="cardCountLabel">0</span>&nbsp;Items in Deck
            </div>
          </div>
          <div class="toggle-btn-wrapper">
            <span class="material-symbols-rounded toggle-arrow">expand_less</span>
          </div>
        </div>
        <div class="results-collapsible-content">
          <div id="flashcardsContainer" class="flashcards-grid"></div>
          <div class="results-actions" style="margin-top: 32px; display: flex; justify-content: flex-end;">
            <button id="tenMoreButton" class="pill-btn neon-flash active hidden">
              <span class="material-symbols-rounded" style="font-size: 16px;">library_add</span>
              10 More...
            </button>
          </div>
        </div>
      </section>

      <footer class="app-footer">
        <div class="disclaimer">
          <span class="material-symbols-rounded" style="font-size: 14px;">info</span>
          AI-generated content can contain factual errors. Always verify critical information with primary sources.
        </div>
      </footer>
    </main>
  </div>
  <script type="module" src="index.tsx"></script>
</body>
</html>